<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        
         <title>CheckOut</title>
        <p:growl id="message" showDetail="true"/>


        <link rel="stylesheet" href="https://unpkg.com/primeflex@3.1.2/primeflex.css"></link>
        <link rel="stylesheet" href="primeflex.css"></link>



        <style type="text/css">

            html,
            body { height: 100%;
            }


            Head{

                margin: 50px;
            }

            td.centeredColumnContent{
                text-align: center;
            }

        </style>
    </h:head>

    <body class="surface-section px-4 py-5 md:px-6 lg:px-8">

            <h:form id="form" class="grid ">
                <div>

                    <div class="col justify-content-start">

                        <label  class="text-3xl font-medium text-900 mb-3 ">Checkout</label>
                    </div>
                    <div class=" justify-content-end">
                        <p:commandButton class="col" value="Abortar" action="#{confirmView.confirm}" update="message" styleClass=" ui-button-danger" icon="pi pi-sign-out">
                            <p:confirm header="Confirmation" message="Terminar Sesion?" icon="pi pi-info-circle"/>
                        </p:commandButton>
                    </div>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
                        <p:commandButton value="No" styleClass="ui-confirmdialog-no ui-button-flat"/>
                        <p:commandButton value="Yes" actionListener="#{CheckoutController.Salir()}" styleClass="ui-confirmdialog-yes" />
                    </p:confirmDialog>

                </div>
                <div class="font-medium text-500 mb-3">Llenar los datos abajo para completar la compra.</div>




                    <!--<div class="surface-card shadow-2 p-3 border-round">-->
                    <div class="grid">
                        <div class=" flex justify-content-end bg-blue-100 border-round"
                             style="width:2.5rem;height:2.5rem">
                            <i class="col pi pi-users text-blue-500 text-xl"/>
                        </div>
                        <div class="justify-content-center">

                            <span class="col block text-500 font-medium mb-3">Datos de Usuario</span>
                        </div>
                    </div>

                    <div class="flex justify-content-between mb-3">
                        <div class="p-3 grid nested-grid">
                            <div class="grid">
                                <div class="col-12">
                                    <label for="Nombre" class="block text-900 font-medium mb-2">Nombre</label>
                                    <p:outputLabel value="#{loginController.user}"/>
                                </div>

                            </div>
                        </div>

                    </div>

                    <!--</div>-->



                            <div class="font-medium text-3xl text-900 mb-3">Informacion</div>

                            <p:dataTable  scrollable="true" scrollHeight="175" var="carrito" value="#{productService.cart}">

                                <p:column styleClass="centeredColumnContent" headerText="Producto/imagen">
                                    <h:outputText value="#{carrito.imagen}"/>
                                </p:column>
                                
                                <p:column styleClass="centeredColumnContent" headerText="Nombre">
                                    <h:outputText value="#{carrito.nombreProducto}"/>
                                </p:column>

                                <p:column styleClass="centeredColumnContent" headerText="Descripcion">
                                    <h:outputText value="#{carrito.descripcion}"/>
                                </p:column>

                                <p:column styleClass="centeredColumnContent" headerText="Precio">
                                    <h:outputText value="#{carrito.precioVenta}"/>
                                </p:column>
                                
                                <p:columnGroup type="footer">
                <p:row>
                    <p:column colspan="3" style="text-align:right" footerText="Totals:"/>
                    <p:column>
                        <f:facet name="footer">
                            <h:outputText value="#{productService.sumaCostoTotal()}">
                              <f:convertNumber type="currency" currencySymbol="$"/>
                            </h:outputText>
                        </f:facet>
                    </p:column>
                    
                </p:row>
            </p:columnGroup>
                            </p:dataTable>
                            
                    <p:commandButton value="Pagar" process="@this" update="form" 
                                     action="#{CheckoutController.insertarVenta()}"/>


            </h:form>
    </body>
</html>
