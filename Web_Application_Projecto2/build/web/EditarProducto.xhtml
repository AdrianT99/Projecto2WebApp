<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Editar Producto</title>
    </h:head>
    
    <style type="text/css">
            button.ui-button {
                margin-right: .700rem;

            }

            html,
            body { height: 100%;
            }
            .parent {
                height: 60px;
                display: flex;
                align-items: baseline;
                justify-content: flex-start;
                padding-top: 40px;
                margin-bottom: 40px            }

            this_form{
                justify-content: flex-start;
            }

            Head{

                margin: 50px;
            }
            
            .class fondoGeneral
            {
                
            }
            #FondoPaginaCostos {
                width: 95%;
                height: 90vh;
                display: flex;
                align-items: center;
                justify-content: center;
                background-size: 300% 300%;
                background-image: linear-gradient(-45deg, #2A2A56 0%, #21212A 15%, #292949 61%, #21212A 100%);
                -webkit-animation: AnimateBG 10s ease infinite;
                animation: AnimateBG 10s ease infinite;
            }

            @-webkit-keyframes AnimateBG {
                0% {
                    background-position: 0% 50%;
                }
                50% {
                    background-position: 100% 50%;
                }
                100% {
                    background-position: 0% 50%;
                }
            }

            @keyframes AnimateBG {
                0% {
                    background-position: 0% 50%;
                }
                50% {
                    background-position: 100% 50%;
                }
                100% {
                    background-position: 0% 50%;
                }
            }

        </style>
    <h:body id="FondoPaginaCostos">

        <div id="arrayDetalleProductos">

            <h:form id="formArrayDetalleProductos">

                <p:growl id="msgs" showDetail="true"/>

                <div id="bloque1" clas="fondoGeneral">
                    <p:panelGrid class = "login" columns="1">
                        Nombre: <p:inputText id="nombreProducto" value="#{EditarProductoController.productoTO.nombreProducto}"
                                             style="margin: auto;
                                             padding-top: -3px;
                                             width: 30%;
                                             height: 30px;">
                            <p:ajax update="nombreProducto"/>
                        </p:inputText>



                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Tipo" />
                            <p:selectOneMenu id="option" value="#{EditarProductoController.productoTO.tipo}">
                                <f:selectItem itemLabel="Select One" itemValue=""/>
                                <f:selectItem itemLabel="U" itemValue="U"/>
                                <f:selectItem itemLabel="D" itemValue="D"/>
                                <f:selectItem itemLabel="T" itemValue="T"/>
                                <p:ajax update="option"/>
                            </p:selectOneMenu>
                        </div>
                        <div>
                            Descripcion: <p:inputTextarea id="descripcion" value="#{EditarProductoController.productoTO.descripcion}" rows="6" cols="33"
                                                          style="margin: auto;
                                                          width: 60%;
                                                          height: 150px;">
                                <p:ajax update="descripcion"/>
                            </p:inputTextarea>
                        </div>
                    </p:panelGrid> 
                </div>

               

                <div class="grid mt-3">

                    <div class="col-12">

                        <p:commandButton value="Agregar" process="@this" update=":formArrayDetalleProductos:msgs"
                                         action="#{CostosController.onAddNew()}" oncomplete="PF('ListaDetalleProducto').addRow();"/>
                    </div>

                </div>

                <div id="calculosArrayDetalleProductos" class="fondoGeneral" style="color:white;">
                    <h:panelGrid class = "login" columns="2" cellpadding="7" id="costoTemp">
                        <h:outputText value="Costo Total"/>
                        <h:outputLabel value="#{CostosController.costoTotal}">
                            <f:convertNumber type="currency" currencySymbol="$"/>
                        </h:outputLabel>

                        <h:outputText value="Margen"/>
                        <p:inputNumber id="margen" decimalPlaces="0" maxValue="100" value="#{CostosController.margen}">
                            <p:ajax update="margen" />
                        </p:inputNumber>

                        <h:outputText value="Precio Sugerido"/>
                        <h:outputLabel value="#{CostosController.precioSugerido}">
                            <f:convertNumber type="currency" currencySymbol="$"/>
                        </h:outputLabel>

                        <h:outputText value="Precio Final"/>
                        <p:inputNumber id="PrecioFinal" decimalPlaces="0" maxValue="1000000" value="#{CostosController.precioFinal}">
                            <p:ajax update="PrecioFinal" />
                        </p:inputNumber>

                    </h:panelGrid>
                </div>

                <div id="botonesCalculos" style="float: left;
                     margin: auto;">
                    <p:commandButton value="Calcular" process="@this" update=":formArrayDetalleProductos:costoTemp" 
                                     actionListener="#{CostosController.calcularPrecioSugerido()}"/>

                    <p:commandButton value="Guardar" process="@this" update="formArrayDetalleProductos" 
                                     action="#{CostosController.insertarProducto()}"/>
                </div>

            </h:form>
        </div>

    </h:body>
</html>

